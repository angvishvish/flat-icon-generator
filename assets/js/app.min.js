'use strict';
var flatIcon = angular.module('flatIcon', [
  'mgcrea.jquery',
  'ngRoute',
  'ui.router',
  'ngMaterial',
])

/**
 * Config
 */

.config([
  '$stateProvider',
  function ($stateProvider) {

    $stateProvider.state(
      'flaticon', {
        url: '/flaticon',
        templateUrl: 'app/flat-icon.html',
        controller: 'flatIconCtrl'
      }
    );
}])

.config([
  '$urlRouterProvider',
  function ($urlRouterProvider) {
    $urlRouterProvider.otherwise('flaticon');
  }
])

.controller('flatIconCtrl', [
  '$scope', '$http', 'jQuery',
  function ($scope, $http, jQuery) {
    
    $http.get('assets/js/fa-icon.json').success(function(data) {
      $scope.icons = data;
    });

    $scope.shadowDepth = 25;
    $scope.color = {
      red:    Math.floor(Math.random() * 255),
      green:  Math.floor(Math.random() * 255),
      blue:   Math.floor(Math.random() * 255)
    };

    $scope.onTextShadow = function () {
      
      var textShadow = '';
      for (var i = 0; i < $scope.shadowDepth; i++ ) {
        if (i != $scope.shadowDepth - 1) {
          textShadow += 'rgb(' + $scope.color.red + ', ' + $scope.color.green + ', ' + $scope.color.blue + ')' + i + 'px ' + i + 'px, ';
        } else {
          textShadow += 'rgb(' + $scope.color.red + ', ' + $scope.color.green + ', ' + $scope.color.blue + ')' + i + 'px ' + i + 'px';
        }
      }
      jQuery('.text-shadow').css ('text-shadow', textShadow);
    }

    $scope.onTextShadow();
  }
]);
